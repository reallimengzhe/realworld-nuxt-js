(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{193:function(t,e,n){"use strict";var r=n(4);n(44);e.a={data:function(){return{followLoading:!1}},methods:{handleFollowSomebody:function(t){var e=arguments,n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o,c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=e.length>1&&void 0!==e[1]?e[1]:function(){},!n.isSignedIn){r.next=15;break}if(n.followLoading=!0,c=t.following,l=t.username,!c){r.next=9;break}return r.next=7,n.$axios.$delete("profiles/".concat(l,"/follow"));case 7:r.next=11;break;case 9:return r.next=11,n.$axios.$post("profiles/".concat(l,"/follow"));case 11:n.followLoading=!1,o(),r.next=16;break;case 15:n.$router.push("/sign-in");case 16:case"end":return r.stop()}}),r)})))()}}}},263:function(t,e,n){"use strict";n.r(e);n(22),n(17),n(18),n(35),n(36);var r=n(10),o=n(4),c=(n(12),n(44),n(27)),l=n(193),m={data:function(){return{favoriteLoading:!1}},methods:{handleLikeArticle:function(article){var t=arguments,e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:function(){},!e.isSignedIn){n.next=15;break}if(e.favoriteLoading=!0,o=article.favorited,c=article.slug,!o){n.next=9;break}return n.next=7,e.$axios.$delete("articles/".concat(c,"/favorite"));case 7:n.next=11;break;case 9:return n.next=11,e.$axios.$post("articles/".concat(c,"/favorite"));case 11:e.favoriteLoading=!1,r(),n.next=16;break;case 15:e.$router.push("/sign-in");case 16:case"end":return n.stop()}}),n)})))()}}},d=n(207);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h=new(n.n(d).a),_={name:"ArticlePage",mixins:[l.a,m],asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,article;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,r=t.params,o=t.redirect,c=r.slug,e.prev=2,e.next=5,n.$get("articles/".concat(c));case 5:return l=e.sent,(article=l.article).body=h.render(article.body),e.abrupt("return",{article:article,slug:c});case 11:e.prev=11,e.t0=e.catch(2),o("/");case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()},head:function(){return{title:"".concat(this.article.title," - Realworld"),meta:[{hid:this.slug,name:"description",content:this.article.body}]}},data:function(){return{comments:[],commentBody:"",commentSubmitLoading:!1}},computed:v(v({},Object(c.b)(["UserInfo"])),{},{isSignedIn:function(){return"token"in this.UserInfo}}),created:function(){this.handleGetComment()},methods:{handleGetArticle:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,article;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("articles/".concat(t.slug));case 2:n=e.sent,(article=n.article).body=h.render(article.body),t.article=article;case 6:case"end":return e.stop()}}),e)})))()},handleGetComment:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("articles/".concat(t.slug,"/comments"));case 2:n=e.sent,r=n.comments,t.comments=r;case 5:case"end":return e.stop()}}),e)})))()},handlePostComment:function(){var t=this;this.commentSubmitLoading=!0,this.$axios.$post("articles/".concat(this.slug,"/comments"),{comment:{body:this.commentBody}}).then((function(){t.commentBody="",t.handleGetComment()})).finally((function(){t.commentSubmitLoading=!1}))},handleDeleteComment:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.$delete("articles/".concat(e.slug,"/comments/").concat(t));case 2:e.handleGetComment();case 3:case"end":return n.stop()}}),n)})))()},handleDeleteArticle:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$delete("articles/".concat(t.slug));case 2:t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()}}},C=n(34),component=Object(C.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-page"},[n("div",{staticClass:"banner"},[n("div",{staticClass:"container"},[n("h1",[t._v(t._s(t.article.title))]),t._v(" "),n("div",{staticClass:"article-meta"},[n("NuxtLink",{attrs:{to:"/@"+t.article.author.username}},[n("img",{attrs:{src:t.article.author.image}})]),t._v(" "),n("div",{staticClass:"info"},[n("NuxtLink",{staticClass:"author",attrs:{to:"/@"+t.article.author.username}},[t._v("\n            "+t._s(t.article.author.username)+"\n          ")]),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(t._f("timeFilter")(t.article.updatedAt)))])],1),t._v(" "),t.UserInfo.username===t.article.author.username?n("span",[n("button",{staticClass:"btn btn-outline-secondary btn-sm",on:{click:function(e){return t.$router.push("/editor?slug="+t.article.slug)}}},[n("i",{staticClass:"ion-edit"}),t._v(" Edit Article\n          ")]),t._v(" "),n("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:t.handleDeleteArticle}},[n("i",{staticClass:"ion-trash-a"}),t._v(" Delete Article\n          ")])]):t._e(),t._v(" "),t.UserInfo.username!==t.article.author.username?n("span",[n("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{disabled:t.followLoading},on:{click:function(e){return t.handleFollowSomebody(t.article.author,t.handleGetArticle)}}},[n("i",{staticClass:"ion-plus-round"}),t._v("\n              "+t._s(t.article.author.following?"Unfollow":"Follow")+"\n            "+t._s(t.article.author.username)+"\n          ")]),t._v("\n           \n          "),n("button",{class:["btn","btn-sm",t.article.favorited?"btn-primary":"btn-outline-primary"],attrs:{disabled:t.favoriteLoading},on:{click:function(e){return t.handleLikeArticle(t.article,t.handleGetArticle)}}},[n("i",{staticClass:"ion-heart"}),t._v("\n              "+t._s(t.article.favorited?"Unfavorite":"Favorite")+" Article\n            "),n("span",{staticClass:"counter"},[t._v("("+t._s(t.article.favoritesCount)+")")])])]):t._e()],1)])]),t._v(" "),n("div",{staticClass:"container page"},[n("div",{staticClass:"row article-content"},[n("div",{staticClass:"col-md-12",domProps:{innerHTML:t._s(t.article.body)}})]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"article-actions"},[n("div",{staticClass:"article-meta"},[n("NuxtLink",{attrs:{to:"/@"+t.article.author.username}},[n("img",{attrs:{src:t.article.author.image}})]),t._v(" "),n("div",{staticClass:"info"},[n("NuxtLink",{staticClass:"author",attrs:{to:"/@"+t.article.author.username}},[t._v("\n            "+t._s(t.article.author.username)+"\n          ")]),t._v(" "),n("span",{staticClass:"date"},[t._v(t._s(t._f("timeFilter")(t.article.updatedAt)))])],1),t._v(" "),t.UserInfo.username===t.article.author.username?n("span",[n("button",{staticClass:"btn btn-outline-secondary btn-sm",on:{click:function(e){return t.$router.push("/editor?slug="+t.article.slug)}}},[n("i",{staticClass:"ion-edit"}),t._v(" Edit Article\n          ")]),t._v(" "),n("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:t.handleDeleteArticle}},[n("i",{staticClass:"ion-trash-a"}),t._v(" Delete Article\n          ")])]):t._e(),t._v(" "),t.UserInfo.username!==t.article.author.username?n("span",[n("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{disabled:t.followLoading},on:{click:function(e){return t.handleFollowSomebody(t.article.author,t.handleGetArticle)}}},[n("i",{staticClass:"ion-plus-round"}),t._v("\n              "+t._s(t.article.author.following?"Unfollow":"Follow")+"\n            "+t._s(t.article.author.username)+"\n          ")]),t._v("\n           \n          "),n("button",{class:["btn","btn-sm",t.article.favorited?"btn-primary":"btn-outline-primary"],attrs:{disabled:t.favoriteLoading},on:{click:function(e){return t.handleLikeArticle(t.article,t.handleGetArticle)}}},[n("i",{staticClass:"ion-heart"}),t._v("\n              "+t._s(t.article.favorited?"Unfavorite":"Favorite")+" Article\n            "),n("span",{staticClass:"counter"},[t._v("("+t._s(t.article.favoritesCount)+")")])])]):t._e()],1)]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-xs-12 col-md-8 offset-md-2"},[n("form",{staticClass:"card comment-form",on:{submit:function(e){return e.preventDefault(),t.handlePostComment(e)}}},[n("div",{staticClass:"card-block"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentBody,expression:"commentBody"}],staticClass:"form-control",attrs:{required:"",placeholder:"Write a comment...",rows:"3",maxlength:"70",disabled:t.commentSubmitLoading},domProps:{value:t.commentBody},on:{input:function(e){e.target.composing||(t.commentBody=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"card-footer"},[n("img",{staticClass:"comment-author-img",attrs:{src:t.UserInfo.image}}),t._v(" "),n("button",{staticClass:"btn btn-sm btn-primary",attrs:{disabled:t.commentSubmitLoading}},[t._v("\n              Post Comment\n            ")])])]),t._v(" "),t._l(t.comments,(function(e){return n("div",{key:e.id,staticClass:"card"},[n("div",{staticClass:"card-block"},[n("p",{staticClass:"card-text"},[t._v(t._s(e.body))])]),t._v(" "),n("div",{staticClass:"card-footer"},[n("NuxtLink",{staticClass:"comment-author",attrs:{to:"/@"+e.author.username}},[n("img",{staticClass:"comment-author-img",attrs:{src:e.author.image}})]),t._v("\n             \n            "),n("NuxtLink",{staticClass:"comment-author",attrs:{to:"/@"+e.author.username}},[t._v("\n              "+t._s(e.author.username)+"\n            ")]),t._v(" "),n("span",{staticClass:"date-posted"},[t._v(t._s(t._f("timeFilter")(e.updatedAt)))]),t._v(" "),n("span",{staticClass:"mod-options"},[t.UserInfo.username===e.author.username?n("i",{staticClass:"ion-trash-a",on:{click:function(n){return t.handleDeleteComment(e.id)}}}):t._e()])],1)])}))],2)])])])}),[],!1,null,null,null);e.default=component.exports}}]);